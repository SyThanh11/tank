(()=>{"use strict";var e,t={99:(e,t,s)=>{s(440);class i extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(0),this.createLoadingGraphics(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(8971347,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload"),this.load.audio("explosion","./assets/sound/explosion.wav"),this.load.audio("hit","./assets/sound/hit.wav"),this.load.audio("overSound","./assets/sound/gameOver.wav"),this.load.audio("move","./assets/sound/move.wav"),this.load.audio("startMenu","./assets/sound/startMenu.mp3"),this.load.audio("clickButton","./assets/sound/clickButton.mp3")}update(){this.scene.start("MenuScene")}createLoadingGraphics(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(16777215,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}class n extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.rotation=e.rotation,this.initImage(),this.scene.add.existing(this)}initImage(){this.bulletSpeed=1e3,this.setOrigin(.5,.5),this.setDepth(2),this.scene.physics.world.enable(this),this.scene.physics.velocityFromRotation(this.rotation-Math.PI/2,this.bulletSpeed,this.body.velocity)}update(){}}const a={MAX_WIDTH:1e3,MAX_HEIGHT:800},o={ROTATION_BARREL_SPEED:5,TANK_SPEED_TURN:3,TANK_SPEED_MOVING:150,BARREL_RADIUS:100,ARROW_SPEED_TURN:3,SCORE_TO_ADD:50},r={normalizeAngleDegree:e=>(e%360+360)%360,differenceBetweenAngles:(e,t)=>r.normalizeAngleDegree(t-e+180)-180},h=r,l=class{constructor(e){this.explosionSound=e.sound.add("explosion"),this.hitSound=e.sound.add("hit"),this.overSound=e.sound.add("overSound",{loop:!0}),this.moveSound=e.sound.add("move",{loop:!0}),this.startSound=e.sound.add("startMenu",{loop:!0}),this.clickButtonSound=e.sound.add("clickButton")}playExplosionSound(){this.explosionSound.isPlaying&&this.explosionSound.stop(),this.explosionSound.play()}stopExplosionSound(){this.explosionSound.stop()}playHitSound(){this.hitSound.isPlaying&&this.hitSound.stop(),this.hitSound.play()}stopHitSound(){this.hitSound.stop()}playOverSound(){this.overSound.isPlaying&&this.overSound.stop(),this.overSound.play()}stopOverSound(){this.overSound.stop()}playMoveSound(){this.moveSound.isPlaying&&this.moveSound.stop(),this.moveSound.play()}stopMoveSound(){this.moveSound.stop()}isMoveSoundPlaying(){return this.moveSound.isPlaying}playStartMenuSound(){this.startSound.isPlaying&&this.startSound.stop(),this.startSound.play(),this.startSound.resume()}stopStartMenuSound(){this.startSound.stop()}playClickButtonSound(){this.clickButtonSound.isPlaying&&this.clickButtonSound.stop(),this.clickButtonSound.play()}stopClickButtonSound(){this.clickButtonSound.stop()}stopAllSound(){this.explosionSound.stop(),this.hitSound.stop(),this.moveSound.stop()}};class c extends Phaser.GameObjects.Container{getBullets(){return this.bullets}constructor(e){Array.isArray(e.children)||void 0===e.children||(e.children=[e.children]),super(e.scene,e.x,e.y,e.children),this.isShooting=!1,this.targetBarrelAngle=0,this.initImage(),this.soundManager=new l(this.scene),this.scene.add.existing(this)}initImage(){var e,t,s,i;this.health=1,this.lastShoot=0,this.speed=o.TANK_SPEED_MOVING,this.tank=this.scene.add.image(0,0,"hullRed"),this.tank.setOrigin(.5,.5),this.tank.setDepth(0),this.tank.angle=180,this.barrel=this.scene.add.image(0,0,"gunRed"),this.barrel.setOrigin(.5,.7),this.barrel.setDepth(1),this.barrel.angle=180,this.lifeBar=this.scene.add.graphics(),this.redrawLifebar(),this.arrow=this.scene.add.image(0,0,"arrow"),this.arrow.setOrigin(.5,.5),this.arrow.setScale(1.3),this.setDepth(1),this.arrow.angle=90,this.bullets=this.scene.add.group({active:!0,maxSize:10,runChildUpdate:!0}),this.keyBoardA=null===(e=this.scene.input.keyboard)||void 0===e?void 0:e.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.keyBoardD=null===(t=this.scene.input.keyboard)||void 0===t?void 0:t.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.keyBoardW=null===(s=this.scene.input.keyboard)||void 0===s?void 0:s.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.keyBoardS=null===(i=this.scene.input.keyboard)||void 0===i?void 0:i.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.registerEvent(),this.scene.physics.world.enable(this),this.setSize(145,230),this.body.setSize(150,225),this.add(this.tank),this.add(this.barrel),this.add(this.lifeBar),this.add(this.arrow),this.setScale(.4)}update(e,t){this.active?(this.handleInput(t),this.handleRotatingBarrel(t),this.handleShooting()):(this.destroy(),this.barrel.destroy(),this.lifeBar.destroy())}registerEvent(){window.addEventListener("contextmenu",(e=>{e.preventDefault()})),this.scene.input.on("pointerdown",(e=>{e.leftButtonDown()&&e.isDown&&(this.isShooting=!0)})),this.scene.input.on("pointerup",(()=>{this.isShooting=!1}))}handleInput(e){var t,s,i,n;this.arrow.rotation=this.tank.rotation-Phaser.Math.DegToRad(90);const a=170*Math.cos(this.arrow.rotation),r=170*Math.sin(this.arrow.rotation);this.arrow.setPosition(this.tank.x+a,this.tank.y+r),(null===(t=this.keyBoardA)||void 0===t?void 0:t.isDown)?this.tank.rotation-=o.TANK_SPEED_TURN*e/1e3:(null===(s=this.keyBoardD)||void 0===s?void 0:s.isDown)&&(this.tank.rotation+=o.TANK_SPEED_TURN*e/1e3),(null===(i=this.keyBoardW)||void 0===i?void 0:i.isDown)?(this.scene.physics.velocityFromRotation(this.tank.rotation-Math.PI/2,this.speed,this.body.velocity),c.eventEmitter.emit("movePlayer")):(null===(n=this.keyBoardS)||void 0===n?void 0:n.isDown)?(this.scene.physics.velocityFromRotation(this.tank.rotation-Math.PI/2,-this.speed,this.body.velocity),c.eventEmitter.emit("movePlayer")):(this.body.setVelocity(0,0),c.eventEmitter.emit("notMovePlayer"))}handleRotatingBarrel(e){this.scene.input.activePointer.updateWorldPoint(this.scene.cameras.main),this.targetBarrelAngle=h.normalizeAngleDegree(Phaser.Math.Angle.Between(this.x,this.y,this.scene.input.activePointer.worldX,this.scene.input.activePointer.worldY)*Phaser.Math.RAD_TO_DEG+90);const t=h.normalizeAngleDegree(this.barrel.angle),s=h.normalizeAngleDegree(this.targetBarrelAngle),i=h.differenceBetweenAngles(t,s);t!=s&&(this.barrel.angle=h.normalizeAngleDegree(this.barrel.angle+i*e/1e3*o.ROTATION_BARREL_SPEED))}handleShooting(){if(this.isShooting&&this.scene.time.now>this.lastShoot&&(this.soundManager.playExplosionSound(),this.isShooting=!1,this.scene.cameras.main.shake(20,.005),this.scene.tweens.add({targets:this,props:{alpha:.8},delay:0,duration:5,ease:"Power1",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!0,paused:!1}),this.bullets.getLength()<10)){const e=new n({scene:this.scene,rotation:this.barrel.rotation,x:this.x+Math.cos(this.barrel.rotation-Phaser.Math.DegToRad(90))*o.BARREL_RADIUS,y:this.y+Math.sin(this.barrel.rotation-Phaser.Math.DegToRad(90))*o.BARREL_RADIUS,texture:"bulletTank"});e.setScale(.5),e.body.setSize(20,20),this.bullets.add(e),this.lastShoot=this.scene.time.now+80}}redrawLifebar(){this.lifeBar.clear(),this.lifeBar.fillStyle(15100456,1),this.lifeBar.fillRect(-50,120,100*this.health,15),this.lifeBar.lineStyle(2,16777215),this.lifeBar.strokeRect(-50,120,100,15),this.lifeBar.setDepth(1),this.lifeBar.setScale(3,2)}updateHealth(){this.health>0?(this.health-=.05,this.redrawLifebar()):(this.health=0,this.active=!1,c.eventEmitter.emit("diePlayer"))}}c.eventEmitter=new Phaser.Events.EventEmitter;class d extends Phaser.GameObjects.Image{getBarrel(){return this.barrel}getBullets(){return this.bullets}constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.initContainer(),this.scene.add.existing(this)}initContainer(){this.health=1,this.lastShoot=0,this.speed=100,this.setDepth(0),this.barrel=this.scene.add.image(0,0,"barrelRed"),this.barrel.setOrigin(.5,1),this.barrel.setDepth(1),this.lifeBar=this.scene.add.graphics(),this.redrawLifebar(),this.bullets=this.scene.add.group({active:!0,maxSize:10,runChildUpdate:!0}),this.scene.tweens.add({targets:this,props:{y:this.y-200},delay:0,duration:2e3,ease:"Linear",easeParams:null,hold:0,repeat:-1,repeatDelay:0,yoyo:!0}),this.scene.physics.world.enable(this)}update(){this.active?(this.barrel.x=this.x,this.barrel.y=this.y,this.lifeBar.x=this.x,this.lifeBar.y=this.y,this.handleShooting()):(this.destroy(),this.barrel.destroy(),this.lifeBar.destroy())}handleShooting(){this.scene.time.now>this.lastShoot&&this.bullets.getLength()<5&&(this.bullets.add(new n({scene:this.scene,rotation:this.barrel.rotation,x:this.barrel.x,y:this.barrel.y,texture:"bulletRed"})),this.lastShoot=this.scene.time.now+1500)}redrawLifebar(){this.lifeBar.clear(),this.lifeBar.fillStyle(15100456,1),this.lifeBar.fillRect(-this.width/2,this.height/2,this.width*this.health,15),this.lifeBar.lineStyle(2,16777215),this.lifeBar.strokeRect(-this.width/2,this.height/2,this.width,15),this.lifeBar.setDepth(1)}updateHealth(){this.health>0?(this.health-=.05,this.redrawLifebar()):(this.health=0,this.active=!1,d.eventEmitter.emit("enemyKilled",this))}}d.eventEmitter=new Phaser.Events.EventEmitter;class u extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.initImage(),this.scene.add.existing(this)}initImage(){this.setOrigin(0,0),this.scene.physics.world.enable(this),this.body.setImmovable(!0)}update(){}}class p extends Phaser.GameObjects.Container{constructor(e){Array.isArray(e.children)||void 0===e.children||(e.children=[e.children]),super(e.scene,e.x,e.y,e.children),this.init(e),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}).on("pointerover",(()=>{e.callBackHoverIn&&e.callBackHoverIn()})).on("pointerout",(()=>{e.callBackHoverOut&&e.callBackHoverOut()})).on("pointerdown",(()=>{e.callBackClick&&e.callBackClick()}))}init(e){(null==e?void 0:e.text)&&(null==e?void 0:e.textStyle)&&(this.text=this.scene.add.text(0,0,e.text,e.textStyle).setOrigin(.5)),(null==e?void 0:e.texture)&&(this.image=this.scene.add.image(0,0,null==e?void 0:e.texture).setOrigin(.5,.5)),(null==e?void 0:e.configure)&&this.setSize(e.configure.sizeButtonX,null==e?void 0:e.configure.sizeButtonY),this.image&&this.add(this.image),this.text&&this.add(this.text)}getImage(){return this.image}getText(){return this.text}}const y=p,g=(e,t,s,i,n,a,o,r,h)=>{e.tweens.add({targets:t,scaleX:s,scaleY:i,alpha:n,duration:a,yoyo:o,ease:r,onComplete:()=>{h&&h()}})},S=class{constructor(){this.score=0,this.bestScore=Number(localStorage.getItem("bestScore"))||0}setScore(e){this.score=e}addScore(e){this.score=this.score+e}setBestScore(e){this.bestScore=Math.max(this.bestScore,e),localStorage.setItem("bestScore",String(this.bestScore))}getScore(){return this.score}resetScore(){this.score=0}getBestScore(){const e=localStorage.getItem("bestScore");return null===e?0:Number(e)}getScoreLocal(){return Number(localStorage.getItem("score"))||0}saveScore(){let e=localStorage.getItem("bestScore");(null===e||Number(e)<this.score)&&(e=String(this.score)),localStorage.setItem("bestScore",e),this.bestScore=Number(e),localStorage.setItem("score",String(this.score))}};class m{constructor(){this.soundEnabled=!0}static getInstance(){return m.instance||(m.instance=new m),m.instance}isSoundEnabled(){return this.soundEnabled}enableSound(){this.soundEnabled=!0}disableSound(){this.soundEnabled=!1}}m.instance=null;const b=m;class v extends Phaser.Scene{constructor(){super({key:"GameScene"}),d.eventEmitter.on("enemyKilled",(()=>{this.score.addScore(o.SCORE_TO_ADD),this.scoreText.setText(`Score : ${this.score.getScore()}`)})),c.eventEmitter.on("diePlayer",(()=>{this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(()=>{this.score.saveScore(),this.score.resetScore(),this.soundManager.stopAllSound(),this.scene.start("GameOverScene")}))})),c.eventEmitter.on("movePlayer",(()=>{this.soundManager.isMoveSoundPlaying()||this.soundManager.playMoveSound()})),c.eventEmitter.on("notMovePlayer",(()=>{this.soundManager.stopMoveSound()}))}init(){this.soundManager=new l(this)}create(){this.map=this.make.tilemap({key:"levelMap"}),this.tileset=this.map.addTilesetImage("tiles"),this.layer=this.map.createLayer("tileLayer",this.tileset,0,0),this.layer.setCollisionByProperty({collide:!0}),this.obstacles=this.add.group({runChildUpdate:!0}),this.enemies=this.add.group({}),this.convertObjects(),this.button=new y({scene:this,x:0,y:0,texture:"pauseIcon",configure:{sizeButtonX:100,sizeButtonY:100},callBackHoverIn:()=>{g(this,this.button,.42,.42,.8,100,!1,"Linear")},callBackHoverOut:()=>{g(this,this.button,.4,.4,1,100,!1,"Linear")},callBackClick:()=>{this.tweens.killTweensOf(this.button),this.soundManager.playClickButtonSound(),g(this,this.button,.38,.38,.7,100,!0,"Linear",(()=>{this.scene.pause(),this.scene.launch("PauseScene")}))}}).setScale(.4),this.button.setScrollFactor(0,0),this.button.setPosition(a.MAX_WIDTH-this.button.width/2,43),this.score=new S,this.scoreText=this.add.text(20,5,`Score : ${this.score.getScore()}`,{fontFamily:"Arial",fontSize:50,fontStyle:"bold",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,stroke:!0,fill:!0}}),this.scoreText.setScrollFactor(0,0),this.physics.add.collider(this.player,this.layer),this.physics.add.collider(this.player,this.obstacles),this.physics.add.collider(this.player.getBullets(),this.layer,this.bulletHitLayer,void 0,this),this.physics.add.collider(this.player.getBullets(),this.obstacles,this.bulletHitObstacles,(()=>{this.soundManager.playHitSound()}),this),this.enemies.getChildren().forEach((e=>{const t=e;this.physics.add.overlap(this.player.getBullets(),t,this.playerBulletHitEnemy,(()=>{this.soundManager.playHitSound()}),this),this.physics.add.overlap(t.getBullets(),this.player,this.enemyBulletHitPlayer,(()=>{this.soundManager.playHitSound()})),this.physics.add.collider(t.getBullets(),this.obstacles,this.bulletHitObstacles,(()=>{this.soundManager.playHitSound()})),this.physics.add.collider(t.getBullets(),this.layer,this.bulletHitLayer,void 0)}),this),this.cameras.main.startFollow(this.player)}update(e,t){this.player.update(e,t),this.enemies.getChildren().forEach((e=>{const t=e;if(t.update(),this.player.active&&t.active){const e=Phaser.Math.Angle.Between(t.body.x,t.body.y,this.player.body.x,this.player.body.y);t.getBarrel().angle=(e+Math.PI/2)*Phaser.Math.RAD_TO_DEG}}),this),b.getInstance().isSoundEnabled()?this.sound.mute=!1:this.sound.mute=!0}convertObjects(){var e;(null===(e=this.map.getObjectLayer("objects"))||void 0===e?void 0:e.objects).forEach((e=>{if("player"===e.type)this.player=new c({scene:this,x:e.x,y:e.y});else if("enemy"===e.type){const t=new d({scene:this,x:e.x,y:e.y,texture:"tankRed"});this.enemies.add(t)}else{const t=new u({scene:this,x:e.x,y:e.y-40,texture:e.type});this.obstacles.add(t)}}))}bulletHitLayer(e){e.destroy()}bulletHitObstacles(e,t){e.destroy()}enemyBulletHitPlayer(e,t){e.destroy(),t.updateHealth()}playerBulletHitEnemy(e,t){e.destroy(),t.updateHealth()}}class B extends Phaser.Scene{constructor(){super({key:"MenuScene"})}init(){var e;this.startKey=null===(e=this.input.keyboard)||void 0===e?void 0:e.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.startKey&&(this.startKey.isDown=!1)}create(){var e;this.soundManager=new l(this),this.soundManager.playStartMenuSound(),this.backgroundImage=this.add.image(0,0,"mainMenu"),this.backgroundImage.setOrigin(0,0),this.backgroundImage.setScale(2),this.blinkingText=this.add.text(a.MAX_WIDTH/2,a.MAX_HEIGHT/2,"Press S to start",{fontFamily:"Arial",fontSize:"50px",fontStyle:"bold",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,stroke:!0,fill:!0}}),this.blinkingText.setOrigin(.5),this.tweens.add({targets:this.blinkingText,alpha:0,ease:"Linear",duration:500,repeat:-1,yoyo:!0}),null===(e=this.input.keyboard)||void 0===e||e.once("keydown-S",(()=>{this.soundManager.stopStartMenuSound();const e=this.cameras.main.postFX.addWipe();this.scene.transition({target:"GameScene",duration:2e3,moveBelow:!0,onUpdate:t=>{e.progress=t}})}))}}class x extends Phaser.GameObjects.Container{constructor(e){Array.isArray(e.children)||void 0===e.children||(e.children=[e.children]),super(e.scene,e.x,e.y,e.children),this.score=new S,this.callBackHoverIn=e=>{g(this.scene,e,.62,.62,.8,100,!1,"Linear")},this.callBackHoverOut=e=>{g(this.scene,e,.6,.6,1,100,!1,"Linear")},this.callBackClick=(e,t)=>{g(this.scene,e,.58,.58,.7,100,!0,"Linear",(()=>{t&&t()}))},this.init(),this.scene.add.existing(this),Phaser.Display.Align.In.Center(this,this.scene.add.zone(a.MAX_WIDTH/2,a.MAX_HEIGHT/2,a.MAX_WIDTH,a.MAX_HEIGHT))}init(){const e=this.scene.add.zone(0,0,1300,1050).setInteractive();this.bannerOver=this.scene.add.image(0,0,"bannerPause"),this.bannerOver.setScale(.4),this.bannerText=this.scene.add.image(0,0,"bannerPauseText"),this.bannerText.setScale(.4,.3),this.bannerText.setDepth(1),this.overText=this.createText("GAME OVER",50),this.scoreText=this.createText(`SCORE: ${this.score.getScoreLocal()}`,50),this.highScoreText=this.createText(`HIGH SCORE: ${this.score.getBestScore()}`,50),this.homeButton=new y({scene:this.scene,x:0,y:0,texture:"homeButton",configure:{sizeButtonX:150,sizeButtonY:150},callBackHoverIn:()=>{this.callBackHoverIn(this.homeButton)},callBackHoverOut:()=>{this.callBackHoverOut(this.homeButton)},callBackClick:()=>{x.eventEmitter.emit("startButton"),x.eventEmitter.emit("changeScene"),this.callBackClick(this.homeButton,(()=>{const e=this.scene.cameras.main.postFX.addWipe(.3,1,1);this.scene.scene.transition({target:"MenuScene",duration:2e3,moveBelow:!0,onUpdate:t=>{e.progress=t}})}))}}).setScale(.6),this.replayButton=new y({scene:this.scene,x:0,y:0,texture:"replayButton",configure:{sizeButtonX:150,sizeButtonY:150},callBackHoverIn:()=>{this.callBackHoverIn(this.replayButton)},callBackHoverOut:()=>{this.callBackHoverOut(this.replayButton)},callBackClick:()=>{x.eventEmitter.emit("startButton"),x.eventEmitter.emit("changeScene"),this.callBackClick(this.replayButton,(()=>{this.scene.cameras.main.fadeOut(1e3,0,0,0),this.scene.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(()=>{this.scene.scene.start("GameScene")}))}))}}).setScale(.6),this.shopButton=new y({scene:this.scene,x:0,y:0,texture:"shopButton",configure:{sizeButtonX:150,sizeButtonY:150},callBackHoverIn:()=>{this.callBackHoverIn(this.shopButton)},callBackHoverOut:()=>{this.callBackHoverOut(this.shopButton)},callBackClick:()=>{this.callBackClick(this.shopButton,(()=>{x.eventEmitter.emit("startButton"),x.eventEmitter.emit("changeScene"),window.open("https://shopee.vn/?gad_source=1&gclid=CjwKCAjw1920BhA3EiwAJT3lScZwkRWvr0XyLa8rtQO6QwYhxSaP4cVnuDGxlj-zbwpZ_ltGp3HFqhoCWaMQAvD_BwE")}))}}).setScale(.6),Phaser.Display.Align.In.Center(this.bannerOver,this),Phaser.Display.Align.In.TopCenter(this.bannerText,e),Phaser.Display.Align.In.Center(this.overText,this.bannerText,0,-15),Phaser.Display.Align.In.Center(this.highScoreText,e,0,-120),Phaser.Display.Align.In.Center(this.scoreText,this.highScoreText,0,100),Phaser.Display.Align.In.Center(this.homeButton,e,0,150),Phaser.Display.Align.In.Center(this.replayButton,e,160,150),Phaser.Display.Align.In.Center(this.shopButton,e,-160,155),this.add(this.bannerOver),this.add(this.bannerText),this.add(this.overText),this.add(this.highScoreText),this.add(this.scoreText),this.add(this.homeButton),this.add(this.replayButton),this.add(this.shopButton)}createText(e,t){return new Phaser.GameObjects.Text(this.scene,0,0,e,{fontFamily:"Arial",fontSize:t,fontStyle:"bold",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,stroke:!0,fill:!0}}).setDepth(2)}}x.eventEmitter=new Phaser.Events.EventEmitter;const f=x;class k extends Phaser.Scene{constructor(){super({key:"GameOverScene"}),f.eventEmitter.on("changeScene",(()=>{this.soundManager.stopOverSound()})),f.eventEmitter.on("startButton",(()=>{this.soundManager.playClickButtonSound()}))}init(){this.soundManager=new l(this),this.soundManager.playOverSound()}create(){this.backgroundImage=this.add.image(0,0,"gameOver"),this.backgroundImage.setOrigin(0,0),this.backgroundImage.setScale(.66),this.gameOverUI=new f({scene:this,x:0,y:0}),this.gameOverUI.setScale(0),this.tweens.add({targets:this.gameOverUI,scaleX:1,scaleY:1,alpha:1,yoyo:!1,ease:"Power",duration:500})}}const w=k;class E extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t,s),this.overlay=this.scene.add.graphics(),this.overlay.fillStyle(0,.7),this.overlay.fillRect(0,0,this.scene.game.config.width,this.scene.game.config.height),this.add(this.overlay),e.add.existing(this)}}const P=E;class I extends Phaser.GameObjects.Container{constructor(e){Array.isArray(e.children)||void 0===e.children||(e.children=[e.children]),super(e.scene,e.x,e.y,e.children),this.init(),this.scene.add.existing(this),Phaser.Display.Align.In.Center(this,this.scene.add.zone(a.MAX_WIDTH/2,a.MAX_HEIGHT/2,a.MAX_WIDTH,a.MAX_HEIGHT))}init(){this.bannerPause=this.scene.add.image(0,0,"bannerPause"),this.bannerPause.setScale(.4),this.bannerText=this.scene.add.image(0,0,"bannerPauseText"),this.bannerText.setScale(.4,.3),this.bannerText.setDepth(1),this.pauseText=this.scene.add.text(0,0,"PAUSE",{fontFamily:"Arial",fontSize:"50px",fontStyle:"bold",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,stroke:!0,fill:!0}}).setDepth(2),this.buttonContinue=this.createButtonWithText("CONTINUE",(()=>{g(this.scene,this.buttonContinue,.45,.35,.8,100,!1,"Linear")}),(()=>{g(this.scene,this.buttonContinue,.4,.3,1,100,!1,"Linear")}),(()=>{g(this.scene,this.buttonContinue,.38,.28,.7,100,!0,"Linear",(()=>{this.scene.scene.stop("PauseScene"),this.scene.scene.resume("GameScene")}))})),this.buttonContinue.setScale(.4,.3),this.buttonReplay=this.createButtonWithText("RESTART",(()=>{g(this.scene,this.buttonReplay,.45,.35,.8,100,!1,"Linear")}),(()=>{g(this.scene,this.buttonReplay,.4,.3,1,100,!1,"Linear")}),(()=>{g(this.scene,this.buttonReplay,.38,.28,.7,100,!0,"Linear",(()=>{this.scene.scene.stop("PauseScene"),this.scene.scene.stop("GameScene"),this.scene.scene.start("GameScene")}))})),this.buttonReplay.setScale(.4,.3),this.buttonExit=new y({scene:this.scene,x:0,y:0,texture:"exitButton",configure:{sizeButtonX:250,sizeButtonY:250},callBackHoverIn:()=>{g(this.scene,this.buttonExit,.32,.32,.8,100,!1,"Linear")},callBackHoverOut:()=>{g(this.scene,this.buttonExit,.3,.3,1,100,!1,"Linear")},callBackClick:()=>{I.eventEmitter.emit("startButton"),g(this.scene,this.buttonExit,.3,.3,.7,100,!0,"Linear",(()=>{this.scene.scene.stop("PauseScene"),this.scene.scene.resume("GameScene")}))}}),this.buttonExit.setScale(.3),this.buttonMusic=new y({scene:this.scene,x:0,y:0,texture:b.getInstance().isSoundEnabled()?"musicButtonOn":"musicButtonOff",configure:{sizeButtonX:150,sizeButtonY:150},callBackHoverIn:()=>{g(this.scene,this.buttonMusic,.52,.52,.8,100,!1,"Linear")},callBackHoverOut:()=>{g(this.scene,this.buttonMusic,.5,.5,1,100,!1,"Linear")},callBackClick:()=>{I.eventEmitter.emit("startButton"),"musicButtonOn"==this.buttonMusic.getImage().texture.key?(this.buttonMusic.getImage().setTexture("musicButtonOff"),b.getInstance().disableSound()):(this.buttonMusic.getImage().setTexture("musicButtonOn"),b.getInstance().enableSound())}}),this.buttonMusic.setScale(.5);const e=this.scene.add.zone(0,0,1300,1050).setInteractive();Phaser.Display.Align.In.Center(this.bannerPause,this),Phaser.Display.Align.In.TopCenter(this.bannerText,e),Phaser.Display.Align.In.Center(this.pauseText,this.bannerText,0,-15),Phaser.Display.Align.In.Center(this.buttonContinue,e,0,-80),Phaser.Display.Align.In.Center(this.buttonReplay,this.buttonContinue,0,200),Phaser.Display.Align.In.Center(this.buttonExit,e,290,-270),Phaser.Display.Align.In.Center(this.buttonMusic,e,-300,-265),this.add(this.bannerPause),this.add(this.bannerText),this.add(this.pauseText),this.add(this.buttonContinue),this.add(this.buttonReplay),this.add(this.buttonExit),this.add(this.buttonMusic)}createButtonWithText(e,t,s,i){return new y({scene:this.scene,x:0,y:0,texture:"buttonBox",text:e,textStyle:{fontFamily:"Arial",fontSize:"100px",fontStyle:"bold",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,stroke:!0,fill:!0}},configure:{sizeButtonX:1150,sizeButtonY:350},callBackHoverIn:()=>{t&&t()},callBackHoverOut:()=>{s&&s()},callBackClick:()=>{I.eventEmitter.emit("startButton"),i&&i()}})}}I.eventEmitter=new Phaser.Events.EventEmitter;const T=I;class O extends Phaser.Scene{constructor(){super({key:"PauseScene"}),T.eventEmitter.on("startButton",(()=>{this.soundManager.playClickButtonSound()}))}init(){this.soundManager=new l(this)}create(){this.overlay=new P(this,0,0),this.pauseSceneUI=new T({scene:this,x:0,y:0}),this.pauseSceneUI.setScale(0),this.tweens.add({targets:this.pauseSceneUI,scaleX:1,scaleY:1,alpha:1,yoyo:!1,ease:"Power",duration:500})}}const A=O,M={title:"Tank",url:"https://github.com/digitsensitive/phaser3-typescript",version:"0.0.1",width:1e3,height:800,type:Phaser.AUTO,parent:"game",scene:[i,B,v,A,w],input:{keyboard:!0},physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!0}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},backgroundColor:"#4974a5",render:{antialias:!0}};class D extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new D(M)}))}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,s,n,a)=>{if(!s){var o=1/0;for(c=0;c<e.length;c++){for(var[s,n,a]=e[c],r=!0,h=0;h<s.length;h++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](s[h])))?s.splice(h--,1):(r=!1,a<o&&(o=a));if(r){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,n,a]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[o,r,h]=s,l=0;if(o.some((t=>0!==e[t]))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(h)var c=h(i)}for(t&&t(s);l<o.length;l++)a=o[l],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=i.O(void 0,[96],(()=>i(99)));n=i.O(n)})();